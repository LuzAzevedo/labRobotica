\documentclass[preview,border=2pt]{standalone}
\usepackage{listings}
\usepackage{xcolor}

\definecolor{darkgreen}{rgb}{0.0, 0.5, 0.0}
\lstdefinestyle{pythonstyle}{
    language=Python,
    basicstyle=\ttfamily\small,
    keywordstyle=\color{blue}\bfseries,
    stringstyle=\color{red},
    commentstyle=\color{darkgreen}\itshape,
    frame=single,
    framerule=0.5pt,
    breaklines=true,
    breakatwhitespace=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=4,
    keepspaces=true,
    columns=fullflexible,
    upquote=true,
    extendedchars=true,
    inputencoding=utf8
}

\begin{document}
\begin{lstlisting}[style=pythonstyle]
from rclpy.qos import QoSProfile, ReliabilityPolicy

qos = QoSProfile(depth=10)
qos.reliability = ReliabilityPolicy.RELIABLE  # ou BEST_EFFORT

pub = self.create_publisher(String, 'chatter', qos)
sub = self.create_subscription(String, 'chatter', cb, qos)
\end{lstlisting}
\end{document}

